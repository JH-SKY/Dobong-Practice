# 도서관 관리 시스템 (Library Management System)

## 1. 📂 프로젝트 구조 (Repository Structure)
```text
└── database/
    └── library-db-practice/      # 도서관 DB 실습 프로젝트
        ├── library_1차.drawio    # ERD 설계 1차 원본
        ├── library_2차.drawio    # ERD 설계 2차 원본 (수정본)
        ├── erd_image.png         # ERD 이미지 파일
        └── README.md             # 프로젝트 명세서 (본 파일)
```

### 2. 기획 의도 (Why)
- 도서관의 핵심 서비스인 도서 대여 및 반납 과정을 디지털화하여 관리 효율성을 높이기 위함.
- 동일 도서가 여러 권 존재할 때 발생하는 데이터 중복을 방지하고, 대여 및 연체 이력을 정확하게 추적하는 시스템 구축을 목표로 함.

### 3. 설계 및 구조 (Architecture)
- **테이블 구성**: `BOOK_INFO`, `BOOK_ITEM`, `LIBRARY`, `USER`, `LOAN`
- **설계 핵심**:
  - **도서 정보와 실물 분리**: `BOOK_INFO`(책 내용)와 `BOOK_ITEM`(도서관 자산)을 분리하여 데이터 무결성 확보.
  - **도서관-실물책 관계**: 1:N 관계로 설정하여 특정 실물 책이 어느 도서관 소속인지 명확히 함.
  - **이력 관리**: 사람과 책의 N:M 관계를 `LOAN` 테이블로 풀어내어 과거 대출 기록까지 보존.
- **ERD 설계도**:
![도서관 시스템 2차 설계도](erd_image.png)

### 4. 핵심 로직 및 기술 선택 이유 (Core Logic & Selection)
- **연체 판별 로직**: `due_date`(반납 예정일)와 현재 날짜를 비교하여 판단.
  - **이유**: 연체 여부를 별도 컬럼으로 저장하면 매일 업데이트가 필요하므로, 조회 시점에 계산(Query)하는 방식이 데이터 무결성 면에서 훨씬 유리함.
- **역정규화 검토**: 대여 상태 조회를 위해 `BOOK_ITEM`에 상태값을 중복 저장하는 방식을 고려함.
  - **이유**: 대규모 조회 시 성능 저하를 막기 위한 실무적 선택.

### 5. 트러블슈팅 (Troubleshooting)
- **고민**: 사람과 책의 관계를 1:N으로 볼 것인가, N:M으로 볼 것인가?
- **원인 분석**: 특정 시점엔 한 명만 빌리지만(1:N), 전체 대출 이력을 관리하려면 여러 사람의 손을 거쳐야 함(N:M).
- **해결 과정**: `LOAN` 테이블이라는 연결 고리를 만들어 두 개의 1:N 관계로 풀어내며 이력 관리 문제 해결.

### 6. 업데이트 기록 (Changelog)
- v1.0 : 초기 ERD 설계 및 도서/장서 분리 구조 확립
- v1.1 : `due_date` 추가를 통한 연체 로직 보완 및 도서관(1:N) 관계 확장

### 7. 실무 관점의 참견 (Insight)
- 실제 서비스라면 연체료 산정을 위해 주말이나 공휴일을 `due_date` 계산에서 제외하는 로직이 추가되어야 합니다. 또한, 연체 발생 시 AI 에이전트가 자동으로 반납 독촉 알림을 보내는 배치(Batch) 시스템을 결합하면 운영 효율이 극대화될 것입니다.

### 8. 성장 포인트 (Retrospective)
- **실무 용어**: `due_date`(반납 예정일)의 의미와 중요성을 배움.
- **설계 사고**: 데이터는 깨끗하게 보관(정규화)하고, 계산은 필요한 시점에 수행한다는 DB 설계의 대원칙을 체득함.